import{_ as x,u as b,r as S,t as k,a as v,o as I,c as V,b as a,d as u,e as _,f as d,w as C,v as R,F as y,p as F,g as B}from"./index-cc45cf71.js";import{B as T}from"./Encoder-a486fbb1.js";const A=c=>(F("data-v-c777e91e"),c=c(),B(),c),M={class:"page-scan"},N={class:"QrCode"},D={ref:"video",height:"100%",width:"100%",id:"video",autoplay:""},L={class:"qr-scanner"},O=A(()=>a("div",{class:"box"},[a("div",{class:"line"}),a("div",{class:"angle"})],-1)),q={__name:"AboutView",setup(c){const f=b(),p=S({loadingShow:!1,codeReader:null,scanText:"",vin:null,tipMsg:"正在尝试识别....",tipShow:!1}),{loadingShow:E,codeReader:n,scanText:t,vin:J,tipMsg:i,tipShow:l}=k(p);n.value=new T,h();function h(){n.value.getVideoInputDevices().then(e=>{l.value=!0,i.value="正在调用摄像头...",console.log("videoInputDevices",e);let o=e[0].deviceId;const s=JSON.stringify(e[0].label);e.length>1&&(s.indexOf("back")>-1?o=e[0].deviceId:o=e[1].deviceId),g(o)}).catch(e=>{l.value=!1,console.error(e)})}function g(e){n.value.reset(),t.value="",n.value.decodeFromInputVideoDeviceContinuously(e,"video",(o,s)=>{i.value="正在尝试识别...",t.value="",o&&(console.log("扫描结果",o),t.value=o.text,t.value&&(l.value=!1,r())),s&&!s&&(i.value="识别失败",setTimeout(()=>{l.value=!1},2e3),console.error(s))})}function r(){console.log("我要传参了",t.value),f.replace({name:"work",params:{result:t.value}}),n.value.reset()}const m=()=>Toast("按钮");return(e,o)=>{const s=v("van-nav-bar"),w=v("van-icon");return I(),V(y,null,[a("div",M,[u(s,{title:"扫描二维码/条形码","right-text":"按钮","left-arrow":"",fixed:"",onClickRight:m,onClickLeft:o[0]||(o[0]=Q=>r())}),a("div",N,[a("video",D,null,512)]),a("div",L,[O,a("div",{class:"back-arrow",onClick:r},[u(w,{name:"arrow-left",color:"#fff"})])])]),a("div",null,_(d(t)),1),C(a("div",{class:"scan-tip"},_(d(i)),513),[[R,d(l)]])],64)}}},z=x(q,[["__scopeId","data-v-c777e91e"]]);export{z as default};
